<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Results - SSearch</title>
  <link rel="stylesheet" href="search.css">
  <script>
    window.onload = function() {
      // Get the value of the "q" parameter from the URL
      var urlParams = new URLSearchParams(window.location.search);
      var searchQuery = urlParams.get('q');

      // Update the search results heading
      var searchResultsHeading = document.querySelector('h1');
      searchResultsHeading.textContent = 'Search Results for "' + searchQuery + '"';

      // Fetch the JSON data
      fetch('api/ssearch.json')
        .then(response => response.json())
        .then(data => {
          var searchResultsContainer = document.querySelector('#search-results');
          searchResultsContainer.innerHTML = ''; // Clear previous results

          data.websites.forEach(function(website) {
            if (website.title.toLowerCase().includes(searchQuery.toLowerCase())) {
              // Create a search result div
              var searchResultDiv = document.createElement('div');
              searchResultDiv.className = 'search-result';

              // Create a link for the search result title
              var link = document.createElement('a');
              link.href = website.link;
link.id="link";
              link.innerHTML = `
              <div class="result">
        <img class="result-logo" src="${website.ico}">
        <div class="result-info">
          <h2 class="result-name">${website.title}</h2>
          <p class="result-description">${website.description}</p>
        </div>
      </div>
              `;

              // Append the link and description to the search result div
              searchResultDiv.appendChild(link);

              // Append the search result div to the search results container
              searchResultsContainer.appendChild(searchResultDiv);
            }
          });
        })
        .catch(error => {
          console.log('Error:', error);
        });
    };
  </script>
</head>
<body>
  <div id="container">
    <div id="header-container">
      <img id="logo" src="https://ssearch-eta.vercel.app/images/logo2%20(1).png" alt="SSearch logo" />
      <div id="search-container">
        <div id="search-input-container">
          <input type="text" id="searchbar" placeholder="Search" />
        </div>
      </div>
    </div>
    <div id="search-results">
      <h1></h1>
    </div>
    <p class="copyright">
      Original website made by 
      <a href="https://codepen.io/Hyperplexed/pen/xxJaxJj" target="_blank">Hyperplexed</a>. 
      <a href="https://ssearch-eta.vercel.app/hyper-license.txt" target="_blank">His project copyright</a>
    </p>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
  document.getElementById('searchbar').addEventListener('keydown', function (event) {
    if (event.key === 'Enter') {
      submitSearch(event);
    }
  });

  function submitSearch(event) {
    event.preventDefault(); // Prevent default form submission
    var searchQueryElement = document.getElementById('searchbar');

    if (searchQueryElement) {
      var searchQuery = searchQueryElement.value;
      if (searchQuery.trim() !== '') {
        window.location.href = 'search?q=' + encodeURIComponent(searchQuery);
      }
    }
  }
});
</script>
</body>
</html>
